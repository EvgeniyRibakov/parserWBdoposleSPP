{
  "timestamp": "2025-12-15T17:44:19.366834",
  "method": "GET",
  "url": "https://static-basket-01.wbbasket.ru/vol2/site/t/jst/onlineChat.de4a3cb8.json",
  "host": "static-basket-01.wbbasket.ru",
  "path": "/vol2/site/t/jst/onlineChat.de4a3cb8.json",
  "headers": {
    "sec-ch-ua-platform": "\"Windows\"",
    "user-agent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36",
    "sec-ch-ua": "\"Google Chrome\";v=\"143\", \"Chromium\";v=\"143\", \"Not A(Brand\";v=\"24\"",
    "sec-ch-ua-mobile": "?0",
    "accept": "*/*",
    "origin": "https://www.wildberries.ru",
    "sec-fetch-site": "cross-site",
    "sec-fetch-mode": "cors",
    "sec-fetch-dest": "empty",
    "referer": "https://www.wildberries.ru/",
    "accept-encoding": "gzip, deflate, br, zstd",
    "accept-language": "ru-RU,ru;q=0.9,en-US;q=0.8,en;q=0.7",
    "priority": "u=1, i"
  },
  "query": {},
  "content": null,
  "platform": "WB",
  "response": {
    "status_code": 200,
    "headers": {
      "accept-ranges": "bytes",
      "access-control-allow-origin": "*",
      "access-control-expose-headers": "",
      "alt-svc": "h3=\":443\"; ma=2592000",
      "cache-status": "HIT",
      "content-encoding": "br",
      "content-type": "application/json; charset=utf-8",
      "last-modified": "Tue, 18 Nov 2025 03:56:08 GMT",
      "vary": "Origin",
      "x-replica-host": "catalog-mediabasket-static-01k.dl.wb.ru",
      "content-length": "4917",
      "date": "Mon, 15 Dec 2025 14:44:18 GMT"
    },
    "content": "{\"onlineChat\":\"<div class=\\\"chat__body j-chat-body\\\" data-link=\\\" {chatAnalytics 'Purchases_Chat_Link_T' '.j-url-attachment' eventData='url'} {chatAnalytics 'Purchases_Chat_Attachment_DLoad' '.j-file-attachment' type='file'} {on 'click' '.j-file-attachment' downloadAttachment} {on 'click' '.j-select-rating' selectRating} {on 'click' '.js-choose-product' ~root.chooseProduct false} {on 'click' '.js-choose-prepared-button' chooseButtonWithAnswer} {on 'click' '.js-open-all-products' openAllProductsScreen} {on 'click' '.js-text-reporter' openTextReporterMode} {on 'click' '.js-resend-message' resendMessage} {on 'submit' '.js-rate-chat' submitChatRating} {on 'change' '.js-rate-operator' selectOperatorRating} {on 'submit' '.js-rate-operator' submitOperatorRating} {on 'click' '.j-intercept-url' interceptCustomUrl} \\\"> {^{if history.length == 0 && !isBroken && type !== 'courier'}} <p class=\\\"chat__message-none\\\">{{:~t('chat.messagesEmpty')}}</p> {{/if}} {^{if wb && isBroken}} <div class=\\\"chat__message-error\\\">  {^{if !~wbSettings.isOffline}} <div class=\\\"chat__message-data-error-icon\\\"></div> <div class=\\\"chat__message-error-text-block\\\"> <p class=\\\"chat__message-error-title\\\">{{:~t('chat.failedToShowMessages')}}</p> <p class=\\\"chat__message-error-message\\\">{{:~t('chat.visitLaterOrReboot')}}</p> </div> <button class=\\\"btn-main chat__message-refresh-btn\\\" data-link=\\\"{on 'click' ~root._refreshChatAsync}\\\">{{:~t('common.update')}}</button> {{else}} <div class=\\\"chat__message-network-error-icon\\\"></div> <div class=\\\"chat__message-error-text-block\\\"> <p class=\\\"chat__message-error-title\\\">{{:~t('chat.noInternet')}}</p> <p class=\\\"chat__message-error-message\\\">{{:~t('chat.checkConnectionAndReboot')}}</p> </div> <button class=\\\"btn-main chat__message-refresh-btn\\\" data-link=\\\"{on 'click' ~root.refreshPage}\\\">{{:~t('common.update')}}</button> {{/if}} </div> {{/if}} {^{if deletedChat}} <div class=\\\"chat__message-error\\\"> <div class=\\\"chat__message-deleted-chat-icon\\\"></div> <div class=\\\"chat__message-error-text-block\\\"> <p class=\\\"chat__message-error-title\\\">{{:~t('chat.deletedChatTitle')}}</p> <p class=\\\"chat__message-error-message\\\">{{:~t('chat.deletedChatDescription')}}</p> </div> <button class=\\\"btn-main chat__message-refresh-btn\\\" data-link=\\\"{on 'click' ~root.refreshPage}\\\">{{:~t('common.refreshPage')}}</button> </div> {{/if}} {{if wb && !isBroken && !~globalSettings.switches.enableChatBot}} <div class=\\\"chat__message message message--answer\\\"> <p class=\\\"message__text\\\"> {{:~t('chat.linaWelcomeMessage', { \\\"tagStart\\\": '<span class=\\\"message__text-wb\\\">', \\\"tagEnd\\\": '</span>' })}} </p> </div> {{/if}} {^{if !isBroken && !deletedChat}} <div class=\\\"chat__invisible-spacer\\\"></div> {^{if !wb && !isDbsChat && ~globalSettings.switches.enableInfoMessageInSellerChat}} <div class=\\\"chat__alert\\\"> <div class=\\\"chat__alert-icon\\\"></div> <div class=\\\"chat__alert-content\\\"> <p class=\\\"chat__alert-title\\\">{{:~t('chat.infoMessageInSellerChat.title')}}</p> <p class=\\\"chat__alert-description\\\">{{:~t('chat.infoMessageInSellerChat.description')}}</p> <a class=\\\"chat__alert-link\\\" href=\\\"#\\\" data-link=\\\"{on 'click' openSupportChat}\\\">{{:~t('chat.writeToSupport')}}</a> </div> </div> {{/if}} {{if type === 'courier'}} <div class=\\\"chat__courier-info\\\" data-link=\\\"class{merge: !history^length toggle='chat__courier-info--without-bottom-margin'}\\\"> <div class=\\\"courier-info__icon\\\"></div> <div class=\\\"courier-info__text\\\"> <p class=\\\"courier-info__title\\\">{{:~t('chat.securityWarningTitle')}}</p> <p class=\\\"courier-info__description\\\">{{:~t('chat.securityWarningDescription')}}</p> </div> </div> {{/if}} {^{for history ~getFileName=getFileName ~showPopupRateChat=showPopupRateChat ~showAdditionalRatingButtons=showAdditionalRatingButtons ~submitChatRating=submitChatRating ~onCloseTooltip=onCloseTooltip ~scrollToBottom=scrollToBottom ~getHeaderDate=getHeaderDate ~firstUnreadMessageTime=firstUnreadMessageTime ~isSellerChat=isSellerChat }} {{if #index == 0 || ~formatDate(#parent.data[#index-1].dt, 'dd.MM.yyyy') != ~formatDate(dt, 'dd.MM.yyyy') }} <p class=\\\"chat__date\\\">{{>~getHeaderDate(dt)}}</p> {{/if}} {^{if (+dt === ~firstUnreadMessageTime && type !== 'error' )}} <div class=\\\"chat__new-messages-divider\\\"> <div class=\\\"chat__new-messages-divider-line\\\"></div> <p class=\\\"chat__new-messages-divider-text\\\">{^{:~t('chat.newMessages')}}</p> <div class=\\\"chat__new-messages-divider-line\\\"></div> </div> {{/if}} {^{if rateChat && !chatRated}} <div class=\\\"chat__message message message--rate-chat message--answer\\\"> <div class=\\\"message__rate-body\\\"> <p class=\\\"message__heading\\\">{{:~t('chat.rateSupport')}}</p> <div class=\\\"message__stars-wrap\\\"> <ul class=\\\"message__stars rate-star\\\"> {{range start=5 end=0 step=-1 ~rating=rating ~message=#data ~ratingButtonsSelected=ratingButtonsSelected}} <li class=\\\"rate-star__item j-select-rating\\\" data-link=\\\" class{merge: ~rating > 0 && #data<=~rating toggle='active'} class{merge: ~rating > 0 && ~wbSettings.displayMode != 'd' toggle='rate-star__item--rated'} {on 'click' ~wbSettings.displayMode == 'd' && ~showAdditionalRatingButtons} {on 'click' ~wbSettings.displayMode == 'm' && ~showPopupRateChat}\\\"> </li> {{/range}} </ul> {^{if !rating}} <time class=\\\"message__time\\\">{{formatDate:#parent.data.dt 'HH:mm'}}</time> {{/if}} </div> {^{if rating && ~wbSettings.displayMode == 'd'}} <div class=\\\"message__additional-buttons\\\"> {^{if rating > 0 && rating < 3}} <p class=\\\"message__heading\\\">{{:~t('chat.whatDidntLike')}}</p> {{else rating == 3}} <p class=\\\"message__heading\\\">{{:~t('chat.whatIsWrong')}}</p> {{else}} <p class=\\\"message__heading\\\">{{:~t('chat.whatLiked')}}</p> {{/if}} <form method=\\\"post\\\" class=\\\"message__rating-form message__rating-form--bot js-rate-chat\\\"> <ul class=\\\"message__rate-buttons rate-buttons\\\"> {^{for getBy(rating) ~ratingButtonsSelected=ratingButtonsSelected ~message=#data ~rating=rating ~form=id}} <li class=\\\"rate-buttons__item\\\"> <input data-link=\\\"~ratingButtonsSelected\\\" type=\\\"checkbox\\\" value=\\\"{{>id}}\\\" id=\\\"{{>'form-'+ ~form + '_rating-'+ ~rating + '_reason-' + id}}\\\" name=\\\"{{>name}}\\\"> <label class=\\\"rate-buttons__button\\\" for=\\\"{{>'form-'+ ~form + '_rating-'+ ~rating + '_reason-' + id}}\\\">{{>name}}</label> </li> {{/for}} </ul> <button class=\\\"message__submit-rating btn-main disabled\\\" type=\\\"submit\\\" data-link=\\\"class{merge: !ratingButtonsSelected || ratingButtonsSelected^length == 0 toggle='disabled'}class{merge: sendingMessage toggle='progress'}\\\"> {{:~t('chat.toSend')}} </button> </form> </div> {{/if}} </div> </div> {{else rateChat && chatRated}} <div class=\\\"chat__message message message--chat-rated message--question\\\"> <p class=\\\"message__text\\\">{{:~t('chat.mySupportRate')}}</p> <div class=\\\"message__content\\\"> <div class=\\\"message__stars-wrap\\\"> <ul class=\\\"message__stars rate-star\\\"> {{range start=5 end=0 step=-1 ~rating=rating ~message=#data}} <li class=\\\"rate-star__item\\\" data-link=\\\"class{merge:~rating > 0 && #data<=~rating toggle='active'} class{merge: ~rating > 0 toggle='rate-star__item--rated'}\\\"> </li> {{/range}} </ul> </div> <time class=\\\"message__time\\\">{{formatDate:#parent.data.dt 'HH:mm'}}</time> </div> </div> {{else rateOperator && !operatorRated}} <div class=\\\"chat__message message message--rate-operator message--answer\\\"> <form method=\\\"post\\\" class=\\\"message__rating-form message__rating-form--operator js-rate-operator\\\" data-link=\\\"class{merge: operatorRating > 0 toggle='selected'}\\\"> <p class=\\\"message__heading\\\"> {{:~t('chat.rateOperator', { \\\"operator\\\": sender.name })}} </p> <ul class=\\\"message__rate-operator rate-operator\\\"> {^{for getOperatorRatingButtons() ~operatorRating=operatorRating ~operatorRated=operatorRated ~messageId=id}} <li class=\\\"rate-operator__item {{>class}}\\\"> {^{if !~operatorRated}} <input type=\\\"radio\\\" id=\\\"{{>'message-' + ~messageId + '_' + id}}\\\" name=\\\"operator-rating\\\" value=\\\"{{>value}}\\\" data-link=\\\"~operatorRating\\\"> {{/if}} <label class=\\\"rate-operator__button\\\" for=\\\"{{>'message-' + ~messageId + '_' + id}}\\\"> <span class=\\\"rate-operator__button-icon\\\"></span> <span class=\\\"rate-operator__button-text\\\">{{>text}}</span> </label> </li> {{/for}} </ul> {^{if operatorRating && !operatorRated}} <button class=\\\"message__submit-rating btn-main\\\" type=\\\"submit\\\" data-link=\\\"class{merge: sendingMessage toggle='progress'}\\\"> {{:~t('chat.toSend')}} </button> {{/if}} </form> </div> {{else rateOperator && operatorRated}} <div class=\\\"chat__message message message--operator-rated message--question\\\"> <div class=\\\"message__content\\\"> <p class=\\\"message__text\\\">{{:~t('chat.myOperatorRate')}} <span class=\\\"message__rate-icon\\\" data-link=\\\"class{merge: operatorRating == 1 toggle='negative'}class{merge: operatorRating == 2 toggle='neutral'}class{merge: operatorRating == 3 toggle='positive'}\\\"> </span> </p> </div> </div> {{else sentProduct}} <div class=\\\"chat__message message message--question message--chosen-product\\\"> <a class=\\\"chat__message-link\\\" href=\\\"{{:~productCardUrl(sentProduct.nmId)}}\\\" target=\\\"_blank\\\"></a> <p class=\\\"message__heading\\\">{{>text}}</p> <div class=\\\"message__content\\\"> {{for sentProduct}} <div class=\\\"message__product-card chat-goods\\\"> <div class=\\\"chat-goods__item-content\\\"> {{if  ~wbSettings.currentLocale != 'by' || viewFlags > 0}} <div class=\\\"chat-goods__image img-plug\\\"> <img src=\\\"{{:~ImageUrl(nmId, 'c246x328', 1, false, viewFlags)}}\\\" data-src-pb=\\\"{{:~ImageUrlPb(nmId, 'c246x328', 1, false, viewFlags)}}\\\" width=\\\"51\\\" height=\\\"68\\\" alt=\\\"{{>name}}\\\"> </div> {{/if}} <div class=\\\"chat-goods__info\\\"> <div class=\\\"chat-goods__info-top\\\"> <p class=\\\"chat-goods__price\\\">{{priceWithCurrencyV2:price true iso=currency}}</p> {^{if status == \\\"Refund\\\" || status == \\\"TransitRefund\\\" || status == \\\"FailedPayment\\\"}} <p class=\\\"chat-goods__status chat-goods__status--refund\\\">{{>trackingStatus}} {{formatDate:lastDate 'dd.MM.yy'}}</p> {{else status == \\\"error\\\"}} <p class=\\\"chat-goods__status chat-goods__status--refund\\\">{{>trackingStatus}} {{if !isActive}}{{formatDate:lastDate 'dd.MM.yy'}}{{/if}}</p> {{else status == \\\"Rejected\\\" || status == \\\"Purchased\\\" || status == \\\"ExcludedFromRate\\\" || status == \\\"CreditRejected\\\" || status == \\\"OnDefectTesting\\\"}} <p class=\\\"chat-goods__status\\\">{{>trackingStatus}} {{formatDate:lastDate 'dd.MM.yy'}}</p> {{else status == \\\"info\\\"}} <p class=\\\"chat-goods__status\\\">{{>trackingStatus}} {{if !isActive}}{{formatDate:lastDate 'dd.MM.yy'}}{{/if}}</p> {{else status == \\\"warning\\\"}} <p class=\\\"chat-goods__status chat-goods__status--warning\\\">{{>trackingStatus}} {{if !isActive}}{{formatDate:lastDate 'dd.MM.yy'}}{{/if}}</p> {{else status == \\\"success\\\"}} <p class=\\\"chat-goods__status chat-goods__status--ready\\\">{{>trackingStatus}} {{if !isActive}}{{formatDate:lastDate 'dd.MM.yy'}}{{/if}}</p> {{else trackingStatus && (readyToReceiveToday || trackingStatusId == '210' || trackingStatusId == '235')}} <p class=\\\"chat-goods__status chat-goods__status--ready\\\">{{>trackingStatus}}</p> {{else trackingStatus}} <p class=\\\"chat-goods__status chat-goods__status--on-way\\\">{{>trackingStatus}}</p> {{else}} <p class=\\\"chat-goods__status chat-goods__status--on-way\\\">{{:~t('chat.onTheWay')}}</p> {{/if}} </div> {{if name}} <p class=\\\"chat-goods__info-middle\\\"> <span class=\\\"chat-goods__good-name\\\">{{>brand}}{{if brand && name}} / {{/if}}{{>name}}</span> </p> {{/if}} <div class=\\\"chat-goods__info-bottom\\\"> {{if color || size && size != '0'}} <ul class=\\\"chat-goods__params\\\"> {{if color}} <li class=\\\"chat-goods__param\\\">{{>color}}</li> {{/if}} {{if size && size != '0'}} <li class=\\\"chat-goods__param\\\">{{>size}}</li> {{/if}} </ul> {{/if}} <p class=\\\"message__time\\\">{{formatDate:#parent.data.dt 'HH:mm'}}</p> </div> </div> </div> </div> {{/for}} </div> </div> {{else payload}} <div class=\\\"chat__message message message--bot-answer\\\" data-link=\\\"class{merge: !(text) && !lastFromBot toggle='message--no-text'}\\\"> <div class=\\\"message__wrapper\\\"> {^{if text}} <div class=\\\"message__content\\\"> {{if !~isSellerChat() && sender && (#index == 0 || type != 'message' || !#parent.data[#index-1] || !#parent.data[#index-1].sender || #parent.data[#index-1].sender.id != sender.id || sender.bot) }} <p class=\\\"message__heading\\\">{{>sender.name}}</p> {{/if}} {^{if text}} <p class=\\\"message__text\\\" data-link=\\\"class{merge: type === 'error' toggle='message--error'}\\\"> {{:~stripHtml(text, custom)}} </p> {{/if}} <p class=\\\"message__time\\\">{{formatDate:dt 'HH:mm'}}</p> </div> {{/if}} {^{if lastFromBot}} {{if payload.showProducts}} <div class=\\\"chat__goods chat-goods chat-goods--main\\\" data-link=\\\"class{merge: sendingMessage toggle='hide'}\\\"> <div class=\\\"chat-goods__wrapper\\\"> <p class=\\\"chat__payload-title\\\">{{:~t('chat.chooseGood')}}</p> <div class=\\\"chat-goods__scroller\\\"> <ul class=\\\"chat-goods__list\\\"> {^{for ~root.messageProducts}} <li class=\\\"chat-goods__item js-choose-product\\\"> <div class=\\\"chat-goods__item-content\\\"> <div class=\\\"chat-goods__image img-plug\\\"> <img src=\\\"{{:~ImageUrl(code1S, 'c516x688', 1, false, viewFlags)}}\\\" data-src-pb=\\\"{{:~ImageUrlPb(code1S, 'c516x688', 1, false, viewFlags)}}\\\" width=\\\"51\\\" height=\\\"68\\\" alt=\\\"{{>name}}\\\"> </div> <div class=\\\"chat-goods__info\\\"> <div class=\\\"chat-goods__info-top\\\"> <p class=\\\"chat-goods__price\\\">{{priceWithCurrencyV2:price true iso=currency}}</p> {^{if status == \\\"Refund\\\" ||  status == \\\"TransitRefund\\\" || status == \\\"ExcludedFromRate\\\" || status == \\\"FailedPayment\\\"}} <p class=\\\"chat-goods__status chat-goods__status--refund\\\">{{>trackingStatus}} {{formatDate:lastDate 'dd.MM.yy'}}</p> {{else status == \\\"error\\\"}} <p class=\\\"chat-goods__status chat-goods__status--refund\\\">{{>trackingStatus}} {{if !isActive}}{{formatDate:lastDate 'dd.MM.yy'}}{{/if}}</p> {{else status == \\\"Rejected\\\" || status == \\\"Purchased\\\" || status == \\\"ExcludedFromRate\\\" || status == \\\"CreditRejected\\\" || status == \\\"OnDefectTesting\\\"}} <p class=\\\"chat-goods__status\\\">{{>trackingStatus}} {{formatDate:lastDate 'dd.MM.yy'}}</p> {{else status == \\\"info\\\"}} <p class=\\\"chat-goods__status\\\">{{>trackingStatus}} {{if !isActive}}{{formatDate:lastDate 'dd.MM.yy'}}{{/if}}</p> {{else status == \\\"warning\\\"}} <p class=\\\"chat-goods__status chat-goods__status--warning\\\">{{>trackingStatus}} {{if !isActive}}{{formatDate:lastDate 'dd.MM.yy'}}{{/if}}</p> {{else status == \\\"success\\\"}} <p class=\\\"chat-goods__status chat-goods__status--ready\\\">{{>trackingStatus}} {{if !isActive}}{{formatDate:lastDate 'dd.MM.yy'}}{{/if}}</p> {{else trackingStatus && (readyToReceiveToday || trackingStatusId == '210' || trackingStatusId == '235')}} <p class=\\\"chat-goods__status chat-goods__status--ready\\\">{{>trackingStatus}}</p> {{else trackingStatus}} <p class=\\\"chat-goods__status chat-goods__status--on-way\\\">{{>trackingStatus}}</p> {{else}} <p class=\\\"chat-goods__status chat-goods__status--on-way\\\">{{:~t('chat.onTheWay')}}</p> {{/if}} </div> <p class=\\\"chat-goods__info-middle\\\"> <span class=\\\"chat-goods__good-name\\\">{{>brand}}{{if brand && name}} / {{/if}}{{>name}}</span> </p> {{if color || size && size != '0'}} <ul class=\\\"chat-goods__params\\\"> <li class=\\\"chat-goods__param\\\">{{>color}}{{if color && size && size != '0'}} &#8226; {{/if}}{{if size && size != '0'}}{{>size}}{{/if}}</li> </ul> {{/if}} </div> </div> <button class=\\\"chat-goods__button btn-base\\\" type=\\\"button\\\">{{:~t('chat.toChoose')}}</button> </li> {{/for}} {^{if ~root.messageProductsShowMore}} <li class=\\\"chat-goods__more js-open-all-products\\\"> <button class=\\\"chat-goods__more-button\\\" type=\\\"button\\\"> <span>{{:~t('chat.moreGoods')}}</span> </button> </li> {{/if}} </ul> </div> </div> </div> {{/if}} {{if payload.buttons}} <div class=\\\"chat__buttons-wrapper\\\" data-link=\\\"class{merge: sendingMessage toggle='hide'}\\\"> {{if !payload.showProducts}} <p class=\\\"chat__payload-title\\\">{{:~t('chat.yourReply')}}</p> {{/if}} <div class=\\\"chat__buttons\\\"> {{for payload.buttons ~message=#data}} <button class=\\\"chat__button js-choose-prepared-button\\\" data-action=\\\"{{>code}}\\\" type=\\\"button\\\">{{>name}}</button> {{/for}} </div> </div> {{/if}} {{if payload.navigation}} <div class=\\\"chat__buttons-wrapper\\\" data-link=\\\"class{merge: sendingMessage toggle='hide'}\\\"> {{if !payload.showProducts && !payload.buttons}} <p class=\\\"chat__payload-title\\\">{{:~t('chat.yourReply')}}</p> {{/if}} <div class=\\\"chat__buttons\\\"> {{for payload.navigation ~message=#data}} <button class=\\\"chat__button chat__button--navigation js-choose-prepared-button\\\" type=\\\"button\\\">{{>name}}</button> {{/for}} </div> </div> {{/if}} {{/if}} </div> </div> {{else}} <div class=\\\"chat__message message{{:hasFile() || hasUrl() ? ' message--file' : ''}}\\\" data-link=\\\" class{merge: inbox toggle='message--answer'} class{merge: !inbox toggle='message--question'} class{merge: (locale == 'cn' && inbox) toggle='autotranslate'}\\\" > <div class=\\\"message__content\\\" data-link=\\\"{on 'click' '.j-img-attachment' ~root.openSlider }\\\"> {{if !~isSellerChat() && inbox && sender && (#index == 0 || type != 'message' || !#parent.data[#index-1] || !#parent.data[#index-1].sender || #parent.data[#index-1].sender.id != sender.id || sender.bot) }} <p class=\\\"message__heading\\\">{{>sender.name}}</p> {{/if}} {{if hasFile() || hasImage()}} {{if hasImage()}} {^{for images}} <div class=\\\"message__media-wrap j-img-attachment\\\"> <div class=\\\"message__img-wrap img-plug\\\"> <img data-link=\\\"src{url:url}\\\" width=\\\"215\\\" height=\\\"170\\\" alt=\\\"{{:~t('chat.downloadedImg')}}\\\" > </div> <p class=\\\"message__file-info\\\"> <span class=\\\"message__file-name\\\"> <span>{^{fileName:(name || url) mode='name'}}</span><span>.{^{if type}}{{>type}}{{else}}{{fileName:(name || url) mode='extension'}}{{/if}}</span> </span> {^{if size > 0}} <span class=\\\"message__file-size\\\">{{humanBytes:size}}</span> {{/if}} </p> </div> {{/for}} {{/if}} {{if hasFile()}} {{for files()}} <div class=\\\"message__media-wrap\\\"> <div class=\\\"message__img-wrap\\\"></div> <p class=\\\"message__file-info\\\"> <a class=\\\"message__file-name j-file-attachment\\\" href=\\\"{{url:url}}\\\"> <span>{{fileName: name || url mode='name'}}</span><span>.{{if type}}{{>type}}{{else}}{{fileName:(name || url) mode='extension'}}{{/if}}</span> </a> {{if size > 0}} <span class=\\\"message__file-size\\\">{{humanBytes:size}}</span> {{/if}} </p> </div> {{/for}} {{/if}} {{/if}} {{if attachments && attachments.goodCard && attachments.goodCard.needRefund }} {{include attachments.goodCard}} <div class=\\\"message__return\\\"> <p class=\\\"message__return-title\\\">{{:~t('chat.returnOfGood')}}</p> <div class=\\\"message__kt-wrap\\\"> <div class=\\\"message__img-wrap message__img-wrap--return img-plug\\\"> <img src=\\\"{{:~ImageUrl(nmID, 'c246x328', 1, false, viewFlags)}}\\\" data-src-pb=\\\"{{:~ImageUrlPb(nmID, 'c246x328', 1, false, viewFlags)}}\\\" width=\\\"51\\\" height=\\\"68\\\" alt=\\\"{{>name}}\\\" > </div> <div class=\\\"message__kt-info\\\"> <p class=\\\"message__kt-header\\\"> <span class=\\\"message__kt-name\\\">{{if brand}}{{>brand}} / {{/if}}{{>name}}</span> <b class=\\\"message__kt-price\\\">{{priceWithCurrencyV2:(price / 100) iso=priceCurrency}}</b> </p> {{if size && size != '0' || color}} <div class=\\\"message__kt-options\\\"> {{if color}} <span>{{>color}}</span> {{/if}} {{if size && size != '0'}} <span>{{>size}}</span> {{/if}} </div> {{/if}} <span class=\\\"message__kt-article\\\"> {{:~t('chat.art', { \\\"nmID\\\": nmID, })}} </span> </div> </div> </div> <br> {{/include}} {{/if}} {^{if custom}} <p class=\\\"message__text\\\">{{:~stripHtml(text, custom)}}</p> {{else locale == 'cn' && inbox && translated}} <p class=\\\"message__text\\\"> {^{if originalLanguage }} {{>translated}} <span class=\\\"message__translate-btn\\\" data-link=\\\"{on changeLanguage}\\\">Обратно на русский</span> {{else}} {{>~stripHtml(text)}} <span class=\\\"message__translate-btn\\\" data-link=\\\"{on changeLanguage}\\\">{{:~t('chat.seeOriginal')}}</span> {{/if}} </p> {{else text || good_card}} <div class=\\\"message__text\\\" data-link=\\\"class{merge: type === 'error' toggle='message--error'}\\\"> <span> {{>~stripHtml(text)}} </span> {{if good_card}} <div class=\\\"message__redirect-container\\\" data-link=\\\"{on redirectChat good_card}\\\"> {{if  ~wbSettings.currentLocale != 'by' || viewFlags > 0}} <img src=\\\"{{:~ImageUrl(good_card.cardId,'c246x328', 1, false, viewFlags)}}\\\" data-src-pb=\\\"{{:~ImageUrlPb(good_card.cardId,'c246x328', 1, false, viewFlags)}}\\\" loading=\\\"lazy\\\"  class=\\\"message__redirect-img\\\" width=\\\"45px\\\" height=\\\"60px\\\" alt=\\\"{{:good_card.productName}}\\\"> {{/if}} <div class=\\\"message__redirect-info-container\\\"> <div class=\\\"message__redirect-product-container\\\"> <span class=\\\"message__redirect-product\\\">{{:good_card.productName}}</span> <div class=\\\"message__redirect-product-fade\\\"></div> </div> <div class=\\\"message__redirect-seller-container\\\"> <span class=\\\"message__redirect-seller\\\">{{:good_card.supplier_name}}</span> <div class=\\\"message__redirect-seller-fade\\\"></div> </div> </div> <div class=\\\"message__redirect-arrow\\\"></div> </div> {{/if}} </div> {{/if}} {{if hasUrl()}} {{for urls()}} <a class=\\\"message__link j-url-attachment\\\" target=\\\"_blank\\\" href=\\\"{{url:url}}\\\">{{>url}}</a> {{/for}} {{/if}} </div> <p class=\\\"message__time\\\" data-link=\\\"class{merge: (attachments && attachments.goodCard && attachments.goodCard.needRefund) toggle='message__time--absolute'}\\\">{{formatDate:dt 'HH:mm'}}</p> </div> {{/if}} {^{if unsent}} <div class=\\\"message-error\\\" data-link=\\\"class{merge: sending toggle='message-error--disabled'}\\\"> <div class=\\\"message-error__preloader\\\"></div> <div class=\\\"message-error__warning\\\"></div> <div class=\\\"message-error__text\\\">{{:~t('chat.messageWasNotSent')}}</div> <button class=\\\"message-error__reload-button js-resend-message\\\" type=\\\"button\\\">{{:~t('chat.resend')}}</button> </div> {{/if}} {{/for}} {{/if}} {^{if notification}} <div class=\\\"chat__notification chat__notification--delay\\\">{^{>notification}}</div> {{/if}} {^{if uploading && uploadingImg}} <div class=\\\"chat__message message message--preloader\\\"> <div class=\\\"message__content\\\"> <div class=\\\"message__loader\\\"></div> <p>{{:~t('chat.loading')}}</p> </div> </div> {{/if}} {^{if canShowArrowDownButton }} <button class=\\\"chat__arrow-down-button\\\" data-link=\\\"{on 'click' ~root.currentChat().scrollToBottom true false}\\\"> <div class=\\\"chat__arrow-down-button-wrapper\\\"> {^{if unreadCount > 0}} <div class=\\\"chat__arrow-down-button-counter chat__item-counter\\\"> {^{:unreadCount}} </div> {{/if}} <div class=\\\"chat__arrow-down-button-icon\\\"></div> </div> </button> {{/if}} </div> {^{if !deletedChat}} <div class=\\\"chat__footer j-chat-footer\\\" data-link=\\\"class{merge: wb && isBroken toggle='hide'}\\\"> <form data-link=\\\"{on 'submit' onSubmit}\\\"> <div class=\\\"chat__form-content\\\" data-link=\\\"class{merge:inputState === 'empty' toggle='empty-input-animation'}class{merge:inputState === 'filled' toggle='text-input-animation'}\\\"> {^{if isEmpty(text) && (type !== 'courier' || ~globalSettings.switches.enableSendContentInCourierChat)}} <label class=\\\"chat__add-file-wrapper\\\" data-link=\\\"class{merge:inputState === 'empty' toggle='empty-input-animation'}{tooltip text=~t('chat.filesTooltipBr') disabled=~wbSettings.displayMode == 'm'}\\\"> {{if tooltipTag}} <span class=\\\"chat__add-file\\\" data-link=\\\"\\\"></span> {{else}} <span class=\\\"chat__add-file\\\" title=\\\"{{:~t('chat.filesTooltip')}}\\\"></span> {{/if}} <input class=\\\"hide-vis\\\" type=\\\"file\\\" accept=\\\"image/png, image/jpg, image/jpeg, image/pdf, application/pdf\\\" data-link=\\\"{on 'change' onFileChange}\\\" > </label> {{/if}} <label class=\\\"chat__inputs-wrap\\\"> <textarea class=\\\"chat__textarea j-chat-textarea\\\" data-link=\\\"class{merge:inputState === 'empty' toggle='empty-input-animation'}class{merge:inputState === 'filled' toggle='text-input-animation'}{on 'input' onInput}{:text:}readonly{:uploading}placeholder{:uploading ? ~t('chat.messageSending') : ~t('chat.yourMessage')}{on 'keypress' onKeyPress}\\\" rows=\\\"1\\\" maxlength=\\\"1000\\\"></textarea> </label> <textarea class=\\\"hide-vis j-fake-for-focus\\\" tabindex=\\\"-1\\\"></textarea> {^{if !isEmpty(text)}} <button                     class=\\\"chat__btn-submit\\\" type=\\\"submit\\\" data-link=\\\"class{merge:isEmpty(text) || uploading toggle='disabled'}class{merge:!isEmpty(text) && !uploading toggle='active'}class{merge:inputState === 'filled' toggle='text-input-animation'}disabled{:isEmpty(text) || uploading}\\\" aria-label=\\\"{{:~t('chat.sendMessage')}}\\\" ></button> {{/if}} </div> </form> <div class=\\\"chat__footer-counter-wrap\\\" data-link=\\\"class{merge: text && text.length >= 900 toggle='chat__footer-counter-warning'}class{merge: text && text.length > 900 && text.length >= 1000 toggle='chat__footer-counter-error'}\\\"> <p> {^{if text && text.length >= 1000}} {{:~t('chat.messageMaxCharacters')}} {{else text && text.length >= 900}} {{:~t('chat.messageCharactersCounter')}} {{/if}} </p> <p> {^{:text && text.length >= 900 ? text.length + '/1000' : ''}} </p> </div> </div> {{/if}}\"}",
    "json": {
      "onlineChat": "<div class=\"chat__body j-chat-body\" data-link=\" {chatAnalytics 'Purchases_Chat_Link_T' '.j-url-attachment' eventData='url'} {chatAnalytics 'Purchases_Chat_Attachment_DLoad' '.j-file-attachment' type='file'} {on 'click' '.j-file-attachment' downloadAttachment} {on 'click' '.j-select-rating' selectRating} {on 'click' '.js-choose-product' ~root.chooseProduct false} {on 'click' '.js-choose-prepared-button' chooseButtonWithAnswer} {on 'click' '.js-open-all-products' openAllProductsScreen} {on 'click' '.js-text-reporter' openTextReporterMode} {on 'click' '.js-resend-message' resendMessage} {on 'submit' '.js-rate-chat' submitChatRating} {on 'change' '.js-rate-operator' selectOperatorRating} {on 'submit' '.js-rate-operator' submitOperatorRating} {on 'click' '.j-intercept-url' interceptCustomUrl} \"> {^{if history.length == 0 && !isBroken && type !== 'courier'}} <p class=\"chat__message-none\">{{:~t('chat.messagesEmpty')}}</p> {{/if}} {^{if wb && isBroken}} <div class=\"chat__message-error\">  {^{if !~wbSettings.isOffline}} <div class=\"chat__message-data-error-icon\"></div> <div class=\"chat__message-error-text-block\"> <p class=\"chat__message-error-title\">{{:~t('chat.failedToShowMessages')}}</p> <p class=\"chat__message-error-message\">{{:~t('chat.visitLaterOrReboot')}}</p> </div> <button class=\"btn-main chat__message-refresh-btn\" data-link=\"{on 'click' ~root._refreshChatAsync}\">{{:~t('common.update')}}</button> {{else}} <div class=\"chat__message-network-error-icon\"></div> <div class=\"chat__message-error-text-block\"> <p class=\"chat__message-error-title\">{{:~t('chat.noInternet')}}</p> <p class=\"chat__message-error-message\">{{:~t('chat.checkConnectionAndReboot')}}</p> </div> <button class=\"btn-main chat__message-refresh-btn\" data-link=\"{on 'click' ~root.refreshPage}\">{{:~t('common.update')}}</button> {{/if}} </div> {{/if}} {^{if deletedChat}} <div class=\"chat__message-error\"> <div class=\"chat__message-deleted-chat-icon\"></div> <div class=\"chat__message-error-text-block\"> <p class=\"chat__message-error-title\">{{:~t('chat.deletedChatTitle')}}</p> <p class=\"chat__message-error-message\">{{:~t('chat.deletedChatDescription')}}</p> </div> <button class=\"btn-main chat__message-refresh-btn\" data-link=\"{on 'click' ~root.refreshPage}\">{{:~t('common.refreshPage')}}</button> </div> {{/if}} {{if wb && !isBroken && !~globalSettings.switches.enableChatBot}} <div class=\"chat__message message message--answer\"> <p class=\"message__text\"> {{:~t('chat.linaWelcomeMessage', { \"tagStart\": '<span class=\"message__text-wb\">', \"tagEnd\": '</span>' })}} </p> </div> {{/if}} {^{if !isBroken && !deletedChat}} <div class=\"chat__invisible-spacer\"></div> {^{if !wb && !isDbsChat && ~globalSettings.switches.enableInfoMessageInSellerChat}} <div class=\"chat__alert\"> <div class=\"chat__alert-icon\"></div> <div class=\"chat__alert-content\"> <p class=\"chat__alert-title\">{{:~t('chat.infoMessageInSellerChat.title')}}</p> <p class=\"chat__alert-description\">{{:~t('chat.infoMessageInSellerChat.description')}}</p> <a class=\"chat__alert-link\" href=\"#\" data-link=\"{on 'click' openSupportChat}\">{{:~t('chat.writeToSupport')}}</a> </div> </div> {{/if}} {{if type === 'courier'}} <div class=\"chat__courier-info\" data-link=\"class{merge: !history^length toggle='chat__courier-info--without-bottom-margin'}\"> <div class=\"courier-info__icon\"></div> <div class=\"courier-info__text\"> <p class=\"courier-info__title\">{{:~t('chat.securityWarningTitle')}}</p> <p class=\"courier-info__description\">{{:~t('chat.securityWarningDescription')}}</p> </div> </div> {{/if}} {^{for history ~getFileName=getFileName ~showPopupRateChat=showPopupRateChat ~showAdditionalRatingButtons=showAdditionalRatingButtons ~submitChatRating=submitChatRating ~onCloseTooltip=onCloseTooltip ~scrollToBottom=scrollToBottom ~getHeaderDate=getHeaderDate ~firstUnreadMessageTime=firstUnreadMessageTime ~isSellerChat=isSellerChat }} {{if #index == 0 || ~formatDate(#parent.data[#index-1].dt, 'dd.MM.yyyy') != ~formatDate(dt, 'dd.MM.yyyy') }} <p class=\"chat__date\">{{>~getHeaderDate(dt)}}</p> {{/if}} {^{if (+dt === ~firstUnreadMessageTime && type !== 'error' )}} <div class=\"chat__new-messages-divider\"> <div class=\"chat__new-messages-divider-line\"></div> <p class=\"chat__new-messages-divider-text\">{^{:~t('chat.newMessages')}}</p> <div class=\"chat__new-messages-divider-line\"></div> </div> {{/if}} {^{if rateChat && !chatRated}} <div class=\"chat__message message message--rate-chat message--answer\"> <div class=\"message__rate-body\"> <p class=\"message__heading\">{{:~t('chat.rateSupport')}}</p> <div class=\"message__stars-wrap\"> <ul class=\"message__stars rate-star\"> {{range start=5 end=0 step=-1 ~rating=rating ~message=#data ~ratingButtonsSelected=ratingButtonsSelected}} <li class=\"rate-star__item j-select-rating\" data-link=\" class{merge: ~rating > 0 && #data<=~rating toggle='active'} class{merge: ~rating > 0 && ~wbSettings.displayMode != 'd' toggle='rate-star__item--rated'} {on 'click' ~wbSettings.displayMode == 'd' && ~showAdditionalRatingButtons} {on 'click' ~wbSettings.displayMode == 'm' && ~showPopupRateChat}\"> </li> {{/range}} </ul> {^{if !rating}} <time class=\"message__time\">{{formatDate:#parent.data.dt 'HH:mm'}}</time> {{/if}} </div> {^{if rating && ~wbSettings.displayMode == 'd'}} <div class=\"message__additional-buttons\"> {^{if rating > 0 && rating < 3}} <p class=\"message__heading\">{{:~t('chat.whatDidntLike')}}</p> {{else rating == 3}} <p class=\"message__heading\">{{:~t('chat.whatIsWrong')}}</p> {{else}} <p class=\"message__heading\">{{:~t('chat.whatLiked')}}</p> {{/if}} <form method=\"post\" class=\"message__rating-form message__rating-form--bot js-rate-chat\"> <ul class=\"message__rate-buttons rate-buttons\"> {^{for getBy(rating) ~ratingButtonsSelected=ratingButtonsSelected ~message=#data ~rating=rating ~form=id}} <li class=\"rate-buttons__item\"> <input data-link=\"~ratingButtonsSelected\" type=\"checkbox\" value=\"{{>id}}\" id=\"{{>'form-'+ ~form + '_rating-'+ ~rating + '_reason-' + id}}\" name=\"{{>name}}\"> <label class=\"rate-buttons__button\" for=\"{{>'form-'+ ~form + '_rating-'+ ~rating + '_reason-' + id}}\">{{>name}}</label> </li> {{/for}} </ul> <button class=\"message__submit-rating btn-main disabled\" type=\"submit\" data-link=\"class{merge: !ratingButtonsSelected || ratingButtonsSelected^length == 0 toggle='disabled'}class{merge: sendingMessage toggle='progress'}\"> {{:~t('chat.toSend')}} </button> </form> </div> {{/if}} </div> </div> {{else rateChat && chatRated}} <div class=\"chat__message message message--chat-rated message--question\"> <p class=\"message__text\">{{:~t('chat.mySupportRate')}}</p> <div class=\"message__content\"> <div class=\"message__stars-wrap\"> <ul class=\"message__stars rate-star\"> {{range start=5 end=0 step=-1 ~rating=rating ~message=#data}} <li class=\"rate-star__item\" data-link=\"class{merge:~rating > 0 && #data<=~rating toggle='active'} class{merge: ~rating > 0 toggle='rate-star__item--rated'}\"> </li> {{/range}} </ul> </div> <time class=\"message__time\">{{formatDate:#parent.data.dt 'HH:mm'}}</time> </div> </div> {{else rateOperator && !operatorRated}} <div class=\"chat__message message message--rate-operator message--answer\"> <form method=\"post\" class=\"message__rating-form message__rating-form--operator js-rate-operator\" data-link=\"class{merge: operatorRating > 0 toggle='selected'}\"> <p class=\"message__heading\"> {{:~t('chat.rateOperator', { \"operator\": sender.name })}} </p> <ul class=\"message__rate-operator rate-operator\"> {^{for getOperatorRatingButtons() ~operatorRating=operatorRating ~operatorRated=operatorRated ~messageId=id}} <li class=\"rate-operator__item {{>class}}\"> {^{if !~operatorRated}} <input type=\"radio\" id=\"{{>'message-' + ~messageId + '_' + id}}\" name=\"operator-rating\" value=\"{{>value}}\" data-link=\"~operatorRating\"> {{/if}} <label class=\"rate-operator__button\" for=\"{{>'message-' + ~messageId + '_' + id}}\"> <span class=\"rate-operator__button-icon\"></span> <span class=\"rate-operator__button-text\">{{>text}}</span> </label> </li> {{/for}} </ul> {^{if operatorRating && !operatorRated}} <button class=\"message__submit-rating btn-main\" type=\"submit\" data-link=\"class{merge: sendingMessage toggle='progress'}\"> {{:~t('chat.toSend')}} </button> {{/if}} </form> </div> {{else rateOperator && operatorRated}} <div class=\"chat__message message message--operator-rated message--question\"> <div class=\"message__content\"> <p class=\"message__text\">{{:~t('chat.myOperatorRate')}} <span class=\"message__rate-icon\" data-link=\"class{merge: operatorRating == 1 toggle='negative'}class{merge: operatorRating == 2 toggle='neutral'}class{merge: operatorRating == 3 toggle='positive'}\"> </span> </p> </div> </div> {{else sentProduct}} <div class=\"chat__message message message--question message--chosen-product\"> <a class=\"chat__message-link\" href=\"{{:~productCardUrl(sentProduct.nmId)}}\" target=\"_blank\"></a> <p class=\"message__heading\">{{>text}}</p> <div class=\"message__content\"> {{for sentProduct}} <div class=\"message__product-card chat-goods\"> <div class=\"chat-goods__item-content\"> {{if  ~wbSettings.currentLocale != 'by' || viewFlags > 0}} <div class=\"chat-goods__image img-plug\"> <img src=\"{{:~ImageUrl(nmId, 'c246x328', 1, false, viewFlags)}}\" data-src-pb=\"{{:~ImageUrlPb(nmId, 'c246x328', 1, false, viewFlags)}}\" width=\"51\" height=\"68\" alt=\"{{>name}}\"> </div> {{/if}} <div class=\"chat-goods__info\"> <div class=\"chat-goods__info-top\"> <p class=\"chat-goods__price\">{{priceWithCurrencyV2:price true iso=currency}}</p> {^{if status == \"Refund\" || status == \"TransitRefund\" || status == \"FailedPayment\"}} <p class=\"chat-goods__status chat-goods__status--refund\">{{>trackingStatus}} {{formatDate:lastDate 'dd.MM.yy'}}</p> {{else status == \"error\"}} <p class=\"chat-goods__status chat-goods__status--refund\">{{>trackingStatus}} {{if !isActive}}{{formatDate:lastDate 'dd.MM.yy'}}{{/if}}</p> {{else status == \"Rejected\" || status == \"Purchased\" || status == \"ExcludedFromRate\" || status == \"CreditRejected\" || status == \"OnDefectTesting\"}} <p class=\"chat-goods__status\">{{>trackingStatus}} {{formatDate:lastDate 'dd.MM.yy'}}</p> {{else status == \"info\"}} <p class=\"chat-goods__status\">{{>trackingStatus}} {{if !isActive}}{{formatDate:lastDate 'dd.MM.yy'}}{{/if}}</p> {{else status == \"warning\"}} <p class=\"chat-goods__status chat-goods__status--warning\">{{>trackingStatus}} {{if !isActive}}{{formatDate:lastDate 'dd.MM.yy'}}{{/if}}</p> {{else status == \"success\"}} <p class=\"chat-goods__status chat-goods__status--ready\">{{>trackingStatus}} {{if !isActive}}{{formatDate:lastDate 'dd.MM.yy'}}{{/if}}</p> {{else trackingStatus && (readyToReceiveToday || trackingStatusId == '210' || trackingStatusId == '235')}} <p class=\"chat-goods__status chat-goods__status--ready\">{{>trackingStatus}}</p> {{else trackingStatus}} <p class=\"chat-goods__status chat-goods__status--on-way\">{{>trackingStatus}}</p> {{else}} <p class=\"chat-goods__status chat-goods__status--on-way\">{{:~t('chat.onTheWay')}}</p> {{/if}} </div> {{if name}} <p class=\"chat-goods__info-middle\"> <span class=\"chat-goods__good-name\">{{>brand}}{{if brand && name}} / {{/if}}{{>name}}</span> </p> {{/if}} <div class=\"chat-goods__info-bottom\"> {{if color || size && size != '0'}} <ul class=\"chat-goods__params\"> {{if color}} <li class=\"chat-goods__param\">{{>color}}</li> {{/if}} {{if size && size != '0'}} <li class=\"chat-goods__param\">{{>size}}</li> {{/if}} </ul> {{/if}} <p class=\"message__time\">{{formatDate:#parent.data.dt 'HH:mm'}}</p> </div> </div> </div> </div> {{/for}} </div> </div> {{else payload}} <div class=\"chat__message message message--bot-answer\" data-link=\"class{merge: !(text) && !lastFromBot toggle='message--no-text'}\"> <div class=\"message__wrapper\"> {^{if text}} <div class=\"message__content\"> {{if !~isSellerChat() && sender && (#index == 0 || type != 'message' || !#parent.data[#index-1] || !#parent.data[#index-1].sender || #parent.data[#index-1].sender.id != sender.id || sender.bot) }} <p class=\"message__heading\">{{>sender.name}}</p> {{/if}} {^{if text}} <p class=\"message__text\" data-link=\"class{merge: type === 'error' toggle='message--error'}\"> {{:~stripHtml(text, custom)}} </p> {{/if}} <p class=\"message__time\">{{formatDate:dt 'HH:mm'}}</p> </div> {{/if}} {^{if lastFromBot}} {{if payload.showProducts}} <div class=\"chat__goods chat-goods chat-goods--main\" data-link=\"class{merge: sendingMessage toggle='hide'}\"> <div class=\"chat-goods__wrapper\"> <p class=\"chat__payload-title\">{{:~t('chat.chooseGood')}}</p> <div class=\"chat-goods__scroller\"> <ul class=\"chat-goods__list\"> {^{for ~root.messageProducts}} <li class=\"chat-goods__item js-choose-product\"> <div class=\"chat-goods__item-content\"> <div class=\"chat-goods__image img-plug\"> <img src=\"{{:~ImageUrl(code1S, 'c516x688', 1, false, viewFlags)}}\" data-src-pb=\"{{:~ImageUrlPb(code1S, 'c516x688', 1, false, viewFlags)}}\" width=\"51\" height=\"68\" alt=\"{{>name}}\"> </div> <div class=\"chat-goods__info\"> <div class=\"chat-goods__info-top\"> <p class=\"chat-goods__price\">{{priceWithCurrencyV2:price true iso=currency}}</p> {^{if status == \"Refund\" ||  status == \"TransitRefund\" || status == \"ExcludedFromRate\" || status == \"FailedPayment\"}} <p class=\"chat-goods__status chat-goods__status--refund\">{{>trackingStatus}} {{formatDate:lastDate 'dd.MM.yy'}}</p> {{else status == \"error\"}} <p class=\"chat-goods__status chat-goods__status--refund\">{{>trackingStatus}} {{if !isActive}}{{formatDate:lastDate 'dd.MM.yy'}}{{/if}}</p> {{else status == \"Rejected\" || status == \"Purchased\" || status == \"ExcludedFromRate\" || status == \"CreditRejected\" || status == \"OnDefectTesting\"}} <p class=\"chat-goods__status\">{{>trackingStatus}} {{formatDate:lastDate 'dd.MM.yy'}}</p> {{else status == \"info\"}} <p class=\"chat-goods__status\">{{>trackingStatus}} {{if !isActive}}{{formatDate:lastDate 'dd.MM.yy'}}{{/if}}</p> {{else status == \"warning\"}} <p class=\"chat-goods__status chat-goods__status--warning\">{{>trackingStatus}} {{if !isActive}}{{formatDate:lastDate 'dd.MM.yy'}}{{/if}}</p> {{else status == \"success\"}} <p class=\"chat-goods__status chat-goods__status--ready\">{{>trackingStatus}} {{if !isActive}}{{formatDate:lastDate 'dd.MM.yy'}}{{/if}}</p> {{else trackingStatus && (readyToReceiveToday || trackingStatusId == '210' || trackingStatusId == '235')}} <p class=\"chat-goods__status chat-goods__status--ready\">{{>trackingStatus}}</p> {{else trackingStatus}} <p class=\"chat-goods__status chat-goods__status--on-way\">{{>trackingStatus}}</p> {{else}} <p class=\"chat-goods__status chat-goods__status--on-way\">{{:~t('chat.onTheWay')}}</p> {{/if}} </div> <p class=\"chat-goods__info-middle\"> <span class=\"chat-goods__good-name\">{{>brand}}{{if brand && name}} / {{/if}}{{>name}}</span> </p> {{if color || size && size != '0'}} <ul class=\"chat-goods__params\"> <li class=\"chat-goods__param\">{{>color}}{{if color && size && size != '0'}} &#8226; {{/if}}{{if size && size != '0'}}{{>size}}{{/if}}</li> </ul> {{/if}} </div> </div> <button class=\"chat-goods__button btn-base\" type=\"button\">{{:~t('chat.toChoose')}}</button> </li> {{/for}} {^{if ~root.messageProductsShowMore}} <li class=\"chat-goods__more js-open-all-products\"> <button class=\"chat-goods__more-button\" type=\"button\"> <span>{{:~t('chat.moreGoods')}}</span> </button> </li> {{/if}} </ul> </div> </div> </div> {{/if}} {{if payload.buttons}} <div class=\"chat__buttons-wrapper\" data-link=\"class{merge: sendingMessage toggle='hide'}\"> {{if !payload.showProducts}} <p class=\"chat__payload-title\">{{:~t('chat.yourReply')}}</p> {{/if}} <div class=\"chat__buttons\"> {{for payload.buttons ~message=#data}} <button class=\"chat__button js-choose-prepared-button\" data-action=\"{{>code}}\" type=\"button\">{{>name}}</button> {{/for}} </div> </div> {{/if}} {{if payload.navigation}} <div class=\"chat__buttons-wrapper\" data-link=\"class{merge: sendingMessage toggle='hide'}\"> {{if !payload.showProducts && !payload.buttons}} <p class=\"chat__payload-title\">{{:~t('chat.yourReply')}}</p> {{/if}} <div class=\"chat__buttons\"> {{for payload.navigation ~message=#data}} <button class=\"chat__button chat__button--navigation js-choose-prepared-button\" type=\"button\">{{>name}}</button> {{/for}} </div> </div> {{/if}} {{/if}} </div> </div> {{else}} <div class=\"chat__message message{{:hasFile() || hasUrl() ? ' message--file' : ''}}\" data-link=\" class{merge: inbox toggle='message--answer'} class{merge: !inbox toggle='message--question'} class{merge: (locale == 'cn' && inbox) toggle='autotranslate'}\" > <div class=\"message__content\" data-link=\"{on 'click' '.j-img-attachment' ~root.openSlider }\"> {{if !~isSellerChat() && inbox && sender && (#index == 0 || type != 'message' || !#parent.data[#index-1] || !#parent.data[#index-1].sender || #parent.data[#index-1].sender.id != sender.id || sender.bot) }} <p class=\"message__heading\">{{>sender.name}}</p> {{/if}} {{if hasFile() || hasImage()}} {{if hasImage()}} {^{for images}} <div class=\"message__media-wrap j-img-attachment\"> <div class=\"message__img-wrap img-plug\"> <img data-link=\"src{url:url}\" width=\"215\" height=\"170\" alt=\"{{:~t('chat.downloadedImg')}}\" > </div> <p class=\"message__file-info\"> <span class=\"message__file-name\"> <span>{^{fileName:(name || url) mode='name'}}</span><span>.{^{if type}}{{>type}}{{else}}{{fileName:(name || url) mode='extension'}}{{/if}}</span> </span> {^{if size > 0}} <span class=\"message__file-size\">{{humanBytes:size}}</span> {{/if}} </p> </div> {{/for}} {{/if}} {{if hasFile()}} {{for files()}} <div class=\"message__media-wrap\"> <div class=\"message__img-wrap\"></div> <p class=\"message__file-info\"> <a class=\"message__file-name j-file-attachment\" href=\"{{url:url}}\"> <span>{{fileName: name || url mode='name'}}</span><span>.{{if type}}{{>type}}{{else}}{{fileName:(name || url) mode='extension'}}{{/if}}</span> </a> {{if size > 0}} <span class=\"message__file-size\">{{humanBytes:size}}</span> {{/if}} </p> </div> {{/for}} {{/if}} {{/if}} {{if attachments && attachments.goodCard && attachments.goodCard.needRefund }} {{include attachments.goodCard}} <div class=\"message__return\"> <p class=\"message__return-title\">{{:~t('chat.returnOfGood')}}</p> <div class=\"message__kt-wrap\"> <div class=\"message__img-wrap message__img-wrap--return img-plug\"> <img src=\"{{:~ImageUrl(nmID, 'c246x328', 1, false, viewFlags)}}\" data-src-pb=\"{{:~ImageUrlPb(nmID, 'c246x328', 1, false, viewFlags)}}\" width=\"51\" height=\"68\" alt=\"{{>name}}\" > </div> <div class=\"message__kt-info\"> <p class=\"message__kt-header\"> <span class=\"message__kt-name\">{{if brand}}{{>brand}} / {{/if}}{{>name}}</span> <b class=\"message__kt-price\">{{priceWithCurrencyV2:(price / 100) iso=priceCurrency}}</b> </p> {{if size && size != '0' || color}} <div class=\"message__kt-options\"> {{if color}} <span>{{>color}}</span> {{/if}} {{if size && size != '0'}} <span>{{>size}}</span> {{/if}} </div> {{/if}} <span class=\"message__kt-article\"> {{:~t('chat.art', { \"nmID\": nmID, })}} </span> </div> </div> </div> <br> {{/include}} {{/if}} {^{if custom}} <p class=\"message__text\">{{:~stripHtml(text, custom)}}</p> {{else locale == 'cn' && inbox && translated}} <p class=\"message__text\"> {^{if originalLanguage }} {{>translated}} <span class=\"message__translate-btn\" data-link=\"{on changeLanguage}\">Обратно на русский</span> {{else}} {{>~stripHtml(text)}} <span class=\"message__translate-btn\" data-link=\"{on changeLanguage}\">{{:~t('chat.seeOriginal')}}</span> {{/if}} </p> {{else text || good_card}} <div class=\"message__text\" data-link=\"class{merge: type === 'error' toggle='message--error'}\"> <span> {{>~stripHtml(text)}} </span> {{if good_card}} <div class=\"message__redirect-container\" data-link=\"{on redirectChat good_card}\"> {{if  ~wbSettings.currentLocale != 'by' || viewFlags > 0}} <img src=\"{{:~ImageUrl(good_card.cardId,'c246x328', 1, false, viewFlags)}}\" data-src-pb=\"{{:~ImageUrlPb(good_card.cardId,'c246x328', 1, false, viewFlags)}}\" loading=\"lazy\"  class=\"message__redirect-img\" width=\"45px\" height=\"60px\" alt=\"{{:good_card.productName}}\"> {{/if}} <div class=\"message__redirect-info-container\"> <div class=\"message__redirect-product-container\"> <span class=\"message__redirect-product\">{{:good_card.productName}}</span> <div class=\"message__redirect-product-fade\"></div> </div> <div class=\"message__redirect-seller-container\"> <span class=\"message__redirect-seller\">{{:good_card.supplier_name}}</span> <div class=\"message__redirect-seller-fade\"></div> </div> </div> <div class=\"message__redirect-arrow\"></div> </div> {{/if}} </div> {{/if}} {{if hasUrl()}} {{for urls()}} <a class=\"message__link j-url-attachment\" target=\"_blank\" href=\"{{url:url}}\">{{>url}}</a> {{/for}} {{/if}} </div> <p class=\"message__time\" data-link=\"class{merge: (attachments && attachments.goodCard && attachments.goodCard.needRefund) toggle='message__time--absolute'}\">{{formatDate:dt 'HH:mm'}}</p> </div> {{/if}} {^{if unsent}} <div class=\"message-error\" data-link=\"class{merge: sending toggle='message-error--disabled'}\"> <div class=\"message-error__preloader\"></div> <div class=\"message-error__warning\"></div> <div class=\"message-error__text\">{{:~t('chat.messageWasNotSent')}}</div> <button class=\"message-error__reload-button js-resend-message\" type=\"button\">{{:~t('chat.resend')}}</button> </div> {{/if}} {{/for}} {{/if}} {^{if notification}} <div class=\"chat__notification chat__notification--delay\">{^{>notification}}</div> {{/if}} {^{if uploading && uploadingImg}} <div class=\"chat__message message message--preloader\"> <div class=\"message__content\"> <div class=\"message__loader\"></div> <p>{{:~t('chat.loading')}}</p> </div> </div> {{/if}} {^{if canShowArrowDownButton }} <button class=\"chat__arrow-down-button\" data-link=\"{on 'click' ~root.currentChat().scrollToBottom true false}\"> <div class=\"chat__arrow-down-button-wrapper\"> {^{if unreadCount > 0}} <div class=\"chat__arrow-down-button-counter chat__item-counter\"> {^{:unreadCount}} </div> {{/if}} <div class=\"chat__arrow-down-button-icon\"></div> </div> </button> {{/if}} </div> {^{if !deletedChat}} <div class=\"chat__footer j-chat-footer\" data-link=\"class{merge: wb && isBroken toggle='hide'}\"> <form data-link=\"{on 'submit' onSubmit}\"> <div class=\"chat__form-content\" data-link=\"class{merge:inputState === 'empty' toggle='empty-input-animation'}class{merge:inputState === 'filled' toggle='text-input-animation'}\"> {^{if isEmpty(text) && (type !== 'courier' || ~globalSettings.switches.enableSendContentInCourierChat)}} <label class=\"chat__add-file-wrapper\" data-link=\"class{merge:inputState === 'empty' toggle='empty-input-animation'}{tooltip text=~t('chat.filesTooltipBr') disabled=~wbSettings.displayMode == 'm'}\"> {{if tooltipTag}} <span class=\"chat__add-file\" data-link=\"\"></span> {{else}} <span class=\"chat__add-file\" title=\"{{:~t('chat.filesTooltip')}}\"></span> {{/if}} <input class=\"hide-vis\" type=\"file\" accept=\"image/png, image/jpg, image/jpeg, image/pdf, application/pdf\" data-link=\"{on 'change' onFileChange}\" > </label> {{/if}} <label class=\"chat__inputs-wrap\"> <textarea class=\"chat__textarea j-chat-textarea\" data-link=\"class{merge:inputState === 'empty' toggle='empty-input-animation'}class{merge:inputState === 'filled' toggle='text-input-animation'}{on 'input' onInput}{:text:}readonly{:uploading}placeholder{:uploading ? ~t('chat.messageSending') : ~t('chat.yourMessage')}{on 'keypress' onKeyPress}\" rows=\"1\" maxlength=\"1000\"></textarea> </label> <textarea class=\"hide-vis j-fake-for-focus\" tabindex=\"-1\"></textarea> {^{if !isEmpty(text)}} <button                     class=\"chat__btn-submit\" type=\"submit\" data-link=\"class{merge:isEmpty(text) || uploading toggle='disabled'}class{merge:!isEmpty(text) && !uploading toggle='active'}class{merge:inputState === 'filled' toggle='text-input-animation'}disabled{:isEmpty(text) || uploading}\" aria-label=\"{{:~t('chat.sendMessage')}}\" ></button> {{/if}} </div> </form> <div class=\"chat__footer-counter-wrap\" data-link=\"class{merge: text && text.length >= 900 toggle='chat__footer-counter-warning'}class{merge: text && text.length > 900 && text.length >= 1000 toggle='chat__footer-counter-error'}\"> <p> {^{if text && text.length >= 1000}} {{:~t('chat.messageMaxCharacters')}} {{else text && text.length >= 900}} {{:~t('chat.messageCharactersCounter')}} {{/if}} </p> <p> {^{:text && text.length >= 900 ? text.length + '/1000' : ''}} </p> </div> </div> {{/if}}"
    }
  }
}